<!DOCTYPE html>
<html>

<head>
  <META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
  <title> Listen to the audio and select the image! </title>



  <!-- external general utilities -->
  <script src="js/general_utils/jquery-1.11.1.min.js "></script>
  <script src="js/general_utils/jquery-ui.min.js"></script>
  <script src="js/general_utils/underscore-min.js"></script>
  <script src="js/general_utils/sweetalert.min.js"></script>
  <script src="js/general_utils/bootstrap.min.js"></script>

  <!-- experiment logic and utilities -->
  <script src="js/exp_run/exp-V2.js"></script>
  <script src="js/exp_run/stream-V2.js"></script>
  <script src="js/exp_run/browserCheck.js"></script>
  <script src="js/exp_run/utils.js"></script>
  <script src="js/exp_run/preload.js"></script>
  <script src="js/exp_run/init_trial_details.js"></script>
  <script src="js/exp_files/exp_lists.js"></script>

  <!-- main exp logic: -->
  <script src="js/exp_run/cohort_competitors.js"></script>

  <!--CSS-->
  <link href="css/jquery-ui.min.css" rel="stylesheet" type="text/css" />
  <link href="css/style.css" rel="stylesheet" type="text/css" />
  <link rel="stylesheet" href="css/bootstrap.min.css">


  <script src="https://proliferate.alps.science/static/js/proliferate.js"></script>

  <!-- webgazer tools -->
  <script src="js/webgazer_tools/resize_canvas.js"></script>
  <script src="js/webgazer_tools/calibration.js"></script>
  <script src="js/webgazer_tools/main.js"></script>
  <script src="js/webgazer_tools/precision_calculation.js"></script>
  <script src="js/webgazer_tools/precision_store_points.js"></script>
  <script src="js/webgazer_tools/webgazer_start_stop.js"></script>



</head>

<body onload="init_explogic();">
  <!-- important: webgazer decl. needs to go in body, not head -->
  <script src="js/webgazer_tools/webgazer.js" type="text/javascript"></script>


  <noscript>This task requires JavaScript.</noscript>
  <div class="slide" id="i0">
    <div class="text-center">
      <img src="mystery_speaker.png" alt="speaker" id="speakerpic"></img>
      <p id="study_title"><b> Listen to the audio and select the image! </b></p>


      <div class="card bg-light mb-3">
        <div class="card-body">
          <p class="card-text">On each screen in this study, you will see two images and hear a sentence.
            <br>
            Your task is to select the image referred to in the sentence you heard. </p>
        </div>
      </div>

      <div class="card border-success mb-3">
        <div class="card-body">
          <h5 class="card-title"> Webcam </h5>
          <p class="card-text">During this task, your eye movements will be recorded using your web camera. <br>
            We will NOT record images of your face at any point: we will only record the coordinates of your eye
            movements. <br>
        </div>
      </div>

      <div class="card border-success mb-3">
        <div class="card-body">
          <h5 class="card-title">Sound</h5>
          <p class="card-text">You <b> must </b> be able to play sound on your computer: you won't be able to complete
            the task satisfactorily if not.
            <br>
            <b> If possible, please wear headphones to complete the task. </b>
          </p>
        </div>
      </div>

      <div class="card border-success mb-3">
        <div class="card-body">
          <h5 class="card-title"> Browser version </h5>

          <p class="card-text">You must be using one of the following browser version - note that <b> we strongly
              recommend using Google Chrome.</b>
            <ul>
              <p class="text-left">
                <li> <b> Google Chrome (version 53 or newer) - (Recommended browser) </b> </li>
                <li> Microsoft Edge (version 12 or newer) </li>
                <li> Mozilla Firefox (version 42 or newer) </li>
                <li> Opera (version 40 or newer) </li>
                <li> Safari (version 11 or newer) </li>
              </p>
            </ul>
          </p>
        </div>
      </div>

      <div class="card border-success mb-3">
        <div class="card-body">
          <h5 class="card-title"> Browser Size</h5>
          <p class="card-text">
            Please maximize your browser window, and keep it maximized throughout the task.
            Your browser window must be at least 1280 pixels wide and 650 pixels tall, while fitting within your
            computer display. You must be able to see everything in the browser window.
            <br>
            <br>
            <b> Your current browser width is: <span id="width"></span></b>
            <br>
            <b> Your current browser height is: <span id="height"></span></b>

            <script>
              $(window).resize(function () {
                $("#width").html($(window).width());
                $("#height").html($(window).height());
              }).resize(); </script>

        </div>
      </div>

      <div class="card border-success mb-3">
        <div class="card-body">
          <h5 class="card-title"> Device and Lighting </h5>
          <p class="card-text">
            <ul>
              <li> You must be using a desktop or laptop with a webcam - you can't use a tablet or cell phone </li>
              <li> The computer should be placed on a hard surface (e.g. table or desk) </li>
              <li> The webcam should be at eye-level, facing you head-on: if it's not built-in to your device, it should be placed just above your monitor, at the center. </li>
              <li> You must be in a brightly lit room, with your face fully illuminated, and no major light sources
                (e.g. windows) behind you </li>
              <li> Throughout the task, please try not to move around too much </li>
            </ul>
          </p>
        </div>
      </div>

      <div class="card border-success mb-3">
        <div class="card-body">
          <h5 class="card-title"> Calibration Phase </h5>
          <p class="card-text">
            Once you click Start, you will be enter a 'Calibration' phase before starting the task, where you can check
            that your head is in the correct position and your face is fully illuminated.
            You may need to move closer to your webcam in order to ensure that your head is in the correct position.
            After completing the Calibration, you will proceed to the task.
            <br>
            <b> IMPORTANT: You may need to perform the Calibration several times to achieve the required accuracy score
              (50%).
              <br>
              If you are not in a brightly lit room, using one of the recommended browsers, with your device on a hard
              surface and the camera at eye level, you may be unable to achieve the required Accuracy score, and will
              have to return the study. </b>
            <br>
          </p>
        </div>
      </div>

      Please only click <b> Start </b> if you agree to all the above.

      <br>
      <br>
      <p id="windowsize_err">
        <font color="red"> Your browser window must be at least 1280 pixels wide and 650 pixels tall. Please maximize
          it. If you cannot, please return the study. </font>
      </p>

      <button id="start_button" type="button">Start</button> <br><br>

      <p id="legal"> <b>LEGAL INFORMATION:</b>
        IRB CONSENT FORM GOES HERE
        <br>
        If you agree to participate, please proceed to the study tasks. </p>
    </div>
  </div>

  <div class="slide" id="startPage">
    <div class="text-center">
      <div id="next-button-holder">
        <button onclick="_s.button()" style="width:50px; height:30px">Next </button>
      </div>
    </div>
  </div>


  <div class="slide" id="training_and_calibration">
    <!-- <p> CALIBRATION INSTRUCTIONS </p> -->
    <canvas id="plotting_canvas" width="1" height="1" style="cursor:crosshair;"></canvas>

    <!-- NAVIGATION BAR -->
    <nav id="webgazerNavbar" class="navbar navbar-nav navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button id="start_camera" onclick="_s.start_camera()">Start Camera</button>
          <button id="start_calibration" onclick="Restart()"> Calibrate</button>
          <button id='begin_task' onclick="_s.finish_calibration_start_task()"> Begin Task</button>
          <button id='helpbutton' onclick="helpModalShow()"> Instructions </button>
          <a class id="Accuracy"> </a>
        </div>
      </div>
    </nav>


    <!-- Calibration points -->
    <div class="calibrationDiv">
      <input type="button" class="Calibration" id="Pt1"></input>
      <input type="button" class="Calibration" id="Pt2"></input>
      <input type="button" class="Calibration" id="Pt3"></input>
      <input type="button" class="Calibration" id="Pt4"></input>
      <input type="button" class="Calibration" id="Pt5"></input>
      <input type="button" class="Calibration" id="Pt6"></input>
      <input type="button" class="Calibration" id="Pt7"></input>
      <input type="button" class="Calibration" id="Pt8"></input>
      <input type="button" class="Calibration" id="Pt9"></input>
    </div>

    <!-- Modal -->
    <div id="helpModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-body">
            <img src="helpmodalimg.png" class="img-responsive">
          </div>
          <div class="modal-footer">
            <button id="closeBtn" type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="_s.start_camera()">Start
              Camera</button>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class="slide" id="single_trial">
    <div class="text-center">
      <!-- audios -->
      <audio id="aud">></audio>
    </div>

    <!-- visual stimuli go here -->
    <div class="imgwrapper" id="imgwrapper">
      <table id="img_table" width=1280>
        <tr>
          <td width="640">
            <img id="img_left" class='imgs' height=300 width=300></img>
          </td>
          <td width="640">
            <img id="img_right" class='imgs' height=300 width=300 marginRight=473><img>
          </td>
        </tr>
      </table>
    </div>

    <!-- instructions for first two trials -->
    <div class="text-center">
      <div id=img_instructions> <b> When the audio is finished, click on the image referred to by the talker. </b> <br> <i> You'll see this reminder for the first
          two trials. </i>
      </div>
      <div id=scene_instructions> Click on the place you think best fits the scene the speaker described. <br> <i>
          You'll see this reminder for the first two trials. </i>
      </div>
    </div>

    <br>
    <div class="text-center">
      <div id="trial_buttons">
        <button id="continue_button" onclick="_s.continue()" style="width:100px; height:30px"> Play audio </button>
        <button id="next_button" onclick="_s.next_trial()" style="width:50px; height:30px"> Next </button>
      </div>
    </div>


  </div>

  <div class="slide" id="subj_info">
    <div class="text-center">
      <p class="subj_info_title">Please answer the brief questions below. Your answers won't affect whether or how you
        get paid for your work.</p>
      <br>
      <div class="subj_info_title">About you</div>

      <p> What's your first language? (the language(s) you spoke at home as a child) <input type="text" id="language" />
      </p>

      <p> What's your gender?
        <select id="gender">
          <label>
            <option value="" /></label>
          <label>
            <option value="Male" />Man</label>
          <label>
            <option value="Woman" />Woman</label>
          <label>
            <option value="NB" />Non-binary</label>
          <label>
            <option value="Other" />Other</label>
          <label>
            <option value="NA" />Rather not say</label>
        </select>
      </p>

      <p>What's your age? <input type="text" id="participantage" /></p>

      <br>

      <div class="subj_info_title">About the study </div>

      <p>Did you wear headphones during the study?:
        <select id="headphones">
          <label>
            <option value="-1" /></label>
          <label>
            <option value="no" />No</label>
          <label>
            <option value="yes" />Yes</label>
          <label>
            <option value="NA" />Rather not say</label>
        </select>
      </p>

      <p>Do you need to wear glasses (or contact lenses) to correct your vision?:
        <select id="eyesight">
          <label>
            <option value="-1" /></label>
          <label>
            <option value="none" />No</label>
          <label>
            <option value="nearsighted" />Yes, I'm nearsighted (can't see well far away)</label>
          <label>
            <option value="farsighted" />Yes, I'm farsighted (can't see well close up)</label>
          <label>
            <option value="NA" />Rather not say</label>
        </select>
      </p>
      <p>During the study, were you wearing glasses or contact lenses?:
        <select id="eyesight_task">
          <label>
            <option value="-1" /></label>
          <label>
            <option value="neither" />No, neither</label>
          <label>
            <option value="glasses" />Glasses</label>
          <label>
            <option value="contacts" />Contact lenses</label>
          <label>
            <option value="NA" />Rather not say</label>
        </select>
      </p>

      <!--               <p> Do you think the pay is fair for the study?
              <select id="pay_fair">
                <label><option value="-1"/></label>
                <label><option value="Yes"/>Yes</label>
                <label><option value="No"/>No</label>
                <label><option value="NA"/>Rather not say</label>
              </select>
            </p> -->

      <p> Could you see the camera video during the study - i.e., after the Calibration?
        <select id="camblock">
          <label>
            <option value="-1" /></label>
          <label>
            <option value="Yes" />Yes</label>
          <label>
            <option value="No" />No</label>
        </select>
      </p>

      <!--               <p> (Optional) What did you think the study was about? </p>
              <textarea id="what_study" rows="3" cols="50"></textarea> -->

      <p> (Optional) Do you have any comments about the study (any problems, etc.)? </p>
      <textarea id="comments" rows="3" cols="50"></textarea>

      <br />
      <p class="err_part2">
        <font color="red">Please complete all non-optional questions! </font>
      </p>
      <br>
      <button onclick="_s.submit()"> Finish </button>
    </div>
  </div>

  <div id="thanks" class="slide js">
    <p class="big">Thanks for your time!</p>
  </div>

</body>

</html>
